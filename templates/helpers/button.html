<!DOCTYPE html><html lang="en"><head><title>templates/helpers/button</title></head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0"><meta name="groc-relative-root" content="../../"><meta name="groc-document-path" content="templates/helpers/button"><meta name="groc-project-path" content="lib/templates/helpers/button.coffee"><meta name="groc-github-url" content="https://github.com/KleeGroup/focus"><link rel="stylesheet" type="text/css" media="all" href="../../assets/style.css"><script type="text/javascript" src="../../assets/behavior.js"></script><body><div id="meta"><div class="file-path"><a href="https://github.com/KleeGroup/focus/blob/master/lib/templates/helpers/button.coffee">lib/templates/helpers/button.coffee</a></div></div><div id="document"><div class="segment"><div class="comments "><div class="wrapper"><p>Example =&gt; button &quot;transalationKey&quot;, icon=&quot;heart&quot; id=&quot;12&quot; class=&quot;btn-danger&quot; type=&quot;submit&quot;</p></div></div><div class="code"><div class="wrapper">Handlebars.registerHelper <span class="hljs-string">"button"</span>,<span class="hljs-function"><span class="hljs-params">(text_key, options)</span> -&gt;</span>
  <span class="hljs-comment">#console.log "button", i18n.t(text_key)</span>
  opt = options.hash <span class="hljs-keyword">or</span> {}
  <span class="hljs-keyword">if</span> opt.role  <span class="hljs-keyword">isnt</span> <span class="hljs-literal">undefined</span> <span class="hljs-keyword">and</span> !Fmk.Helpers.userHelper.hasRole(opt.role)
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
  isLoading =  opt.isLoading
  cssClass = opt.class <span class="hljs-keyword">or</span> <span class="hljs-string">""</span>
  cssId = opt.id <span class="hljs-keyword">or</span> guid()
  dataAttributes = opt.dataAttributes <span class="hljs-keyword">or</span> <span class="hljs-string">""</span> 
  type = opt.type <span class="hljs-keyword">or</span> <span class="hljs-string">"button"</span>
  action = <span class="hljs-keyword">if</span> opt.action? <span class="hljs-keyword">then</span> <span class="hljs-string">"data-action=<span class="hljs-subst">#{action}</span>"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
  <span class="hljs-function"><span class="hljs-title">loading</span> = -&gt;</span>
    <span class="hljs-keyword">if</span> isLoading <span class="hljs-keyword">or</span> type <span class="hljs-keyword">is</span> <span class="hljs-string">'submit'</span>
      <span class="hljs-keyword">return</span> <span class="hljs-string">"data-loading data-loading-text='<span class="hljs-subst">#{opt.loadingText <span class="hljs-keyword">or</span> i18n.t(<span class="hljs-string">'button.loading'</span>)}</span>'"</span>
    <span class="hljs-keyword">return</span> <span class="hljs-string">""</span>
  <span class="hljs-function"><span class="hljs-title">icon</span> = <span class="hljs-params">()</span>-&gt;</span>
     <span class="hljs-keyword">if</span> opt.icon? <span class="hljs-keyword">then</span> <span class="hljs-string">"&lt;i class='fa fa-fw fa-<span class="hljs-subst">#{opt.icon}</span>'&gt;&lt;/i&gt;"</span> <span class="hljs-keyword">else</span> <span class="hljs-string">""</span>
  button = <span class="hljs-string">"&lt;button type='<span class="hljs-subst">#{type}</span>' <span class="hljs-subst">#{action}</span>  <span class="hljs-subst">#{dataAttributes}</span> class='btn <span class="hljs-subst">#{cssClass}</span>' id='<span class="hljs-subst">#{cssId}</span>' <span class="hljs-subst">#{loading()}</span>&gt;<span class="hljs-subst">#{icon()}</span> <span class="hljs-subst">#{<span class="hljs-keyword">if</span> text_key <span class="hljs-keyword">isnt</span> <span class="hljs-string">''</span> <span class="hljs-keyword">then</span> i18n.t(text_key) <span class="hljs-keyword">else</span> <span class="hljs-string">''</span>}</span>&lt;/button&gt;"</span>
  <span class="hljs-keyword">new</span> Handlebars.SafeString(button)</div></div></div></div></body></html>